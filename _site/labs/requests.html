<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Lab - MI 250</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Lab | MI 250</title> <meta name="generator" content="Jekyll v4.3.2" /> <meta property="og:title" content="Lab" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Introduction to Applied Programming: A course for non-programmers to introduce them to basic concepts of programming that are useful in careers where most of the time is not spent programming, but some technical knowledge is useful." /> <meta property="og:description" content="Introduction to Applied Programming: A course for non-programmers to introduce them to basic concepts of programming that are useful in careers where most of the time is not spent programming, but some technical knowledge is useful." /> <link rel="canonical" href="http://localhost:4000/labs/requests.html" /> <meta property="og:url" content="http://localhost:4000/labs/requests.html" /> <meta property="og:site_name" content="MI 250" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Lab" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Introduction to Applied Programming: A course for non-programmers to introduce them to basic concepts of programming that are useful in careers where most of the time is not spent programming, but some technical knowledge is useful.","headline":"Lab","url":"http://localhost:4000/labs/requests.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> MI 250 </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/syllabus.html" class="nav-list-link">Syllabus</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander" aria-label="toggle links in Schedule category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/schedule.html" class="nav-list-link">Schedule</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 1 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/1.html" class="nav-list-link">Week 1</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/first_week.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/intro_to_class.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/labs/installing_python.html" class="nav-list-link">Lab</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 2 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/2.html" class="nav-list-link">Week 2</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/variables.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/control_flow.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/studios/choose_your_own_adventure.html" class="nav-list-link">Studio</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 3 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/3.html" class="nav-list-link">Week 3</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/version_control.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/git_and_gitlab.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/studios/round_robin.html" class="nav-list-link">Studio</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 4 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/4.html" class="nav-list-link">Week 4</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/loops.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/counting_and_loops.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/studios/flashcards.html" class="nav-list-link">Studio</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 5 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/5.html" class="nav-list-link">Week 5</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/drawing.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/turtle.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/studios/flag.html" class="nav-list-link">Studio</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 6 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/6.html" class="nav-list-link">Week 6</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/lists_and_randomness.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/lists.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/studios/guestbook.html" class="nav-list-link">Studio</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 7 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/7.html" class="nav-list-link">Week 7</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/functions.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/drawing_with_functions.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/studios/speak_in_emoji.html" class="nav-list-link">Studio</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 8 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/8.html" class="nav-list-link">Week 8</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/dictionaries.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/dictionaries_as_data_structures.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/studios/structured_UI.html" class="nav-list-link">Studio</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 9 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/9.html" class="nav-list-link">Week 9</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/modules.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/fall_break.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/labs/organizing_your_program.html" class="nav-list-link">Lab</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 10 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/10.html" class="nav-list-link">Week 10</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/revisiting_functions.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/practicing_functions.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/studios/tic_tac_toe.html" class="nav-list-link">Studio</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 11 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/11.html" class="nav-list-link">Week 11</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/reading_code.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/election.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/labs/practice_reading.html" class="nav-list-link">Lab</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 12 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/12.html" class="nav-list-link">Week 12</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/files.html" class="nav-list-link">Readings</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 13 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/13.html" class="nav-list-link">Week 13</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/refactoring.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/studios/thanksgiving.html" class="nav-list-link">Studio</a> </li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander" aria-label="toggle links in Week 14 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/14.html" class="nav-list-link">Week 14</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/apis.html" class="nav-list-link">Readings</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Final Week category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/final.html" class="nav-list-link">Final Week</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/final.html" class="nav-list-link">Readings</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in Reference category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/reference.html" class="nav-list-link">Reference</a><ul class="nav-list "><li class="nav-list-item "><a href="/reference/turning_in_work.html" class="nav-list-link">Turning in work</a></li><li class="nav-list-item "><a href="/reference/screenshots.html" class="nav-list-link">Taking screenshots</a></li><li class="nav-list-item "><a href="/reference/command_line.html" class="nav-list-link">Using command line</a></li><li class="nav-list-item "><a href="/reference/using_git.html" class="nav-list-link">Using Git</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search MI 250" aria-label="Search MI 250" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/schedule.html">Schedule</a></li> <li class="breadcrumb-nav-list-item"><a href="/week/14.html">Week 14</a></li> <li class="breadcrumb-nav-list-item"><span>Lab</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1> Week 14 Lab: Requests and Movies </h1> <p><b>Git Repository:</b> <a href="https://gitlab.msu.edu/mi-250/using-apis" target="_blank"><tt>https://gitlab.msu.edu/mi-250/using-apis </tt></a> </p> <!--<p><b>Zoom Link:</b> <a href="https://msu.zoom.us/j/96651450582?pwd=SVhqOTNOMzJERW5BSVVmaEhFeWd2QT09"><tt>https://msu.zoom.us/j/96651450582?pwd=SVhqOTNOMzJERW5BSVVmaEhFeWd2QT09</tt></a>--> <p>There is a limit to what you can do with python alone. But the Internet has a wide range of additional services, and you can use python to access them through APIs. Today we are going to explore how to do this.</p> <h2 id="requests"> <a href="#requests" class="anchor-heading" aria-labelledby="requests"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Requests </h2> <p>We are going to begin by using a simple API that just gives us some current information. To do this, we need to install the <em>requests</em> library. Using the command line, run the command:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3 install requests
</code></pre></div></div> <p>(If you use VS Code’s built-in python, you’ll need to install requests through VS Code.)</p> <p>Requests is a library that makes it easy to access APIs through web requests.</p> <h3 id="exercise-1-who-is-on-the-international-space-station"> <a href="#exercise-1-who-is-on-the-international-space-station" class="anchor-heading" aria-labelledby="exercise-1-who-is-on-the-international-space-station"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 1: Who is on the International Space Station? </h3> <p>There is an API available on <code class="language-plaintext highlighter-rouge">http://api.open-notify.org/</code> that provides information about the people who are currently in space. One of the things that it can do is tell you who is currently present on the space station. To get that, we use the <code class="language-plaintext highlighter-rouge">astros.json</code> endpoint.</p> <p>Use the requests library to retrive the list of current astronauts on the International Space Station and print out what the API returns.</p> <p>To query the API, you can use the <code class="language-plaintext highlighter-rouge">requests.get()</code> function, and tell it which endpoint you want to query. If you save the results of that query into a variable called <code class="language-plaintext highlighter-rouge">people</code>, then you can print out <code class="language-plaintext highlighter-rouge">people.text</code> to see what it sent back. (You will need to <code class="language-plaintext highlighter-rouge">import requests</code> at the top of your file to load the library.)</p> <p>Start by looking at the file <code class="language-plaintext highlighter-rouge">iss.py</code> in the lab repository. It has the correct URL for the API. Call the <code class="language-plaintext highlighter-rouge">requests.get()</code> function (after <code class="language-plaintext highlighter-rouge">import</code>ing requests) and pass in the URL for ISS information. Then save the results into a variable called <code class="language-plaintext highlighter-rouge">people</code>..</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>people = requests.get(astronauts)
</code></pre></div></div> <p>The results is a complex variable with many parts. You want to print out the <code class="language-plaintext highlighter-rouge">.text</code> part of that variable to see who is on the ISS.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>print(people.text)
</code></pre></div></div> <h3 id="exercise-2-parse-the-json-response"> <a href="#exercise-2-parse-the-json-response" class="anchor-heading" aria-labelledby="exercise-2-parse-the-json-response"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 2: Parse the JSON response </h3> <p>You will notice that the response is actually quite complex. It is in a data structure called “JSON”. Fortunately, python makes it pretty easy to convert something from JSON to normal python dictionaries and lists. We can use the <code class="language-plaintext highlighter-rouge">json</code> library and use the <code class="language-plaintext highlighter-rouge">json.loads()</code> function to convert from JSON to python:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import json

info = json.loads(people.text)
</code></pre></div></div> <p>Once you have loaded the json into a python dictionary, use <code class="language-plaintext highlighter-rouge">pprint()</code> (from the <code class="language-plaintext highlighter-rouge">pprint</code> library) to pretty print out the whole dictionary. When working with APIs, I have found that using <code class="language-plaintext highlighter-rouge">pprint()</code> to pretty print the resulting dictionary is important for helping me to see the structure of the data that I get from the API.</p> <p><em>Hint</em>: You will probably need to <code class="language-plaintext highlighter-rouge">from pprint import pprint</code> for this exercise.</p> <p><em>Hint 2</em>: We use pretty printing back in the lab where we talked about complex python data structures – <a href="../8/lab.html">week 8</a>.</p> <h3 id="exercise-3-human-readable-output"> <a href="#exercise-3-human-readable-output" class="anchor-heading" aria-labelledby="exercise-3-human-readable-output"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 3: Human Readable Output </h3> <p>Once you have converted into a python dictionary, then you can use the normal python tools like for loops and <code class="language-plaintext highlighter-rouge">[]</code> to access it. For example, asking for <code class="language-plaintext highlighter-rouge">info['number']</code> will return the number of people currently in space, and <code class="language-plaintext highlighter-rouge">info['people']</code> will return a <em>list</em> of dictionaries about the people currently in space. Note each person is represented by a dictionary with multiple keys, include <code class="language-plaintext highlighter-rouge">'name'</code>.</p> <p>Convert the response of this API to python dictionaries, and then write code to make the output easier to read; something like this:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Number of people in space: 3
Andrew Morgan
Oleg Skripochka
Jessica Meir
</code></pre></div></div> <p><em>Hint</em>: It is almost always best to go through a list with a <code class="language-plaintext highlighter-rouge">for</code> loop:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>for person in response['people']:
	# The person variable now containts a dictionary for a person
</code></pre></div></div> <p><em>Hint 2</em>: The people currently in space frequently changes as people launch and land. You might not get the same number or same people as it was when I wrote this. That’s one of the coolest parts of APIs; they can be current and up-to-date.</p> <h2 id="apis-with-parameters"> <a href="#apis-with-parameters" class="anchor-heading" aria-labelledby="apis-with-parameters"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> APIs with Parameters </h2> <p>You can think of an API request like you are calling a function – except that function is somewhere else across the internet. Like functions, you can add parameters to the request to tell it more what you want to do.</p> <p>You can add parameters to a request by putting the parameters in a dictionary, and passing it to the <code class="language-plaintext highlighter-rouge">requests.get()</code> API call.</p> <h3 id="exercise-4-find-words-that-rhyme-with-your-name"> <a href="#exercise-4-find-words-that-rhyme-with-your-name" class="anchor-heading" aria-labelledby="exercise-4-find-words-that-rhyme-with-your-name"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 4: Find words that rhyme with your name </h3> <p><a href="https://www.datamuse.com/api/">Datamuse</a> has a nice, easy to use API that will give you words that are related to other words in various ways. One thing you can do with this API is request words that <em>rhyme</em> (sound like) a word that you provide. To do that, you pass a parameter called <code class="language-plaintext highlighter-rouge">rel_rhy</code> (for “related” to by “rhyme”) to the datamuse words API, and set that paramter equal to the word you want to rhyme.</p> <p>You can add parameters to a <code class="language-plaintext highlighter-rouge">requests.get()</code> call by putting them into a dictionary and then passing that dictionary as a second parameter:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>parameter = {"rel_rhy": "stuff"}
rhyming = requests.get(datamuse, parameter)
</code></pre></div></div> <p>The file <code class="language-plaintext highlighter-rouge">rhyme.py</code> in the lab has the Datamuse API endpoint. Create a dictionary with one item in it – <code class="language-plaintext highlighter-rouge">rel_rhy</code> as the key, and your last name as the value. Then call the API, and print out what it returns. Printing out the raw JSON is fine; don’t convert it or parse it yet.</p> <p><em>Hint</em>: You’ll need to remember to <code class="language-plaintext highlighter-rouge">import requests</code> to use the requests library.</p> <p><em>Hint 2</em>: Remember, to get the JSON data out of the result of the API call, you need to use <code class="language-plaintext highlighter-rouge">.text</code> like you did in the previous exercises.</p> <h3 id="exercise-5-pretty-print-the-json-response"> <a href="#exercise-5-pretty-print-the-json-response" class="anchor-heading" aria-labelledby="exercise-5-pretty-print-the-json-response"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 5: Pretty print the JSON response </h3> <p>The raw JSON that is returned by DataMuse is complicated and hard to read. This is unfortunately pretty normal for APIs – they give you a LOT of information, and you need to pick through it to get what you want out.</p> <p>The first step is understanding what they give you back. For this exercise, your goal is to pretty print the results from the previous exercise. You will need to first convert the results from JSON to a python dictionary using <code class="language-plaintext highlighter-rouge">json.loads()</code>. Then you can use the <a href="https://docs.python.org/3/library/pprint.html"><code class="language-plaintext highlighter-rouge">pprint()</code></a> function to print it out in a readable form.</p> <p><em>Hint</em>: You will probably need to <code class="language-plaintext highlighter-rouge">import json</code> and <code class="language-plaintext highlighter-rouge">from pprint import pprint</code> for this exercise.</p> <p><em>Hint 2</em>: We use pretty printing back in the lab where we talked about complex python data structures – <a href="../7/lab.html">week 7</a>.</p> <h3 id="exercise-6-accept-user-input"> <a href="#exercise-6-accept-user-input" class="anchor-heading" aria-labelledby="exercise-6-accept-user-input"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 6: Accept user input, </h3> <p>Let’s make this rhyme finding program more user-friendly.</p> <p>Modify the program to accept user input. Ask the user what word they want to find a rhyme for, and then pass that word into the API. You can do this the same way you have all semester by using the python <code class="language-plaintext highlighter-rouge">input()</code> command.</p> <p><em>Hint</em>: You will need to modify the dictionary you pass to the api to include the word input by the user.</p> <h3 id="exercise-7-print-out-the-top-5-rhymes"> <a href="#exercise-7-print-out-the-top-5-rhymes" class="anchor-heading" aria-labelledby="exercise-7-print-out-the-top-5-rhymes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 7: Print out the top 5 rhymes </h3> <p>The API returns the a complicated JSON thing. You already converted the JSON to a python dictionary using <code class="language-plaintext highlighter-rouge">json.loads()</code>. Now then print out the top 5 rhyming words (and only 5) that match. Only print out 5 words, no more and only print out the words (no scores or anything else in the dictionary).</p> <p>For example, if I want to rhyme the word ‘time’, I could run the program and get:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>What word do you want to rhyme? time
paradigm
sublime
rhyme
prime
crime
</code></pre></div></div> <!-- ### Exercise increment exercise : Spelling corrector [Datamuse](https://www.datamuse.com/api/) can do things other than rhyming. One of the things that it can do is make suggestions for correcting your spelling. To do this, instead of passing in the `rel_rhy` parameter, you pass in an `sp` parameter. Write a new `spelling.py` program that asks a user for a (possibly misspelled) word, sends that word to the Datamuse API, and reports back any possible corrected spellings. You might want to start with your code from `rhyme.py`, and "Save as" spelling.py. ### Exercise increment exercise : Only print out good results If you look at the JSON that the spelling API returns, it gives a list of words, and a "score" for each word. The score is how well the word matches, with higher scored being more likely. Modify your spelling program to have a cutoff (that you, as the programmer, decide), and then only print out words that have a score that is above the cutoff -- that is, only print out words that are highly likely to be the word the user was thinking. --> <h2 id="apis-with-authentication"> <a href="#apis-with-authentication" class="anchor-heading" aria-labelledby="apis-with-authentication"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> APIs with authentication </h2> <p>Both the Astronauts API and the Datamuse API can be used by anyone, without needing an account. Most APIs are not that open, though. Most APIs require you to have an account and to authenticate (prove who you are) before you are allowed to make queries. This is more complicated for APIs than it is on normal websites; they don’t just use a username and password. Instead, they use more complicated setups like OAuth or APIKey to do the authentication.</p> <p>For today’s lab, we are going to access the API at The Movie Database (TMDB). TMDB uses an access key for access. You have to create an account on TMDB’s website, and ask it to generate an access key for you. Then you need to include that access key with every request you make, so they know it is you.</p> <h3 id="exercise-8-sign-up-for-tmdb-create-a-new-app-and-retrieve-the-access-key"> <a href="#exercise-8-sign-up-for-tmdb-create-a-new-app-and-retrieve-the-access-key" class="anchor-heading" aria-labelledby="exercise-8-sign-up-for-tmdb-create-a-new-app-and-retrieve-the-access-key"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 8: Sign up for TMDB, Create a new app, and retrieve the access key. </h3> <p>In order to be able to access TMDB’s API, you need to have a TMDB account. If you do not already have a TMDB account, go to <a href="https://www.themoviedb.org/signup">https://www.themoviedb.org/signup</a> and sign up for an account now. You will need to verify your email address before you can move forward. Only one member of your pair needs to do this.</p> <p>To access all of the TMDB developer features, use their developer portal: <a href="https://developers.themoviedb.org/3/getting-started/introduction">https://developers.themoviedb.org/3/getting-started/introduction</a>.</p> <p>Once you have signed in, you will see a profile icon next to the search icon in the upper right hand corner. Click on that profile icon and it will bring up a menu. Choose choose “Settings”. On the settings page, there is an option on the left called “API”. Click that. You will see a list of all “Apps” that you have created. For an API, an App is a program that you are writing that needs permission to access the API. As a developer, you can create more than one app (if you want). Most likely, you have no apps there right now. Click on “Create” to create a new “App” for the program we are writing, and then choose “Developer” option..</p> <p>Accept the terms of service, and then TMDB will then present you with a form about that app that asks you for a lot of information. Fill it the form – give your app a name, provide a description, etc. You can use this website (<a href="http://mi250.cas.msu.edu">http://mi250.cas.msu.edu</a>) for the required website. Make it a personal app.</p> <p>Once you create the app, you will be taken to the App page that shows the information you just submitted. On that page you should see the API key and the access token. These keys identify which app you are using, so TMDB (the company) can tell which program’s API access is being used. Copy-and-paste those into the appropriate places in the file “movies.py” in our lab.</p> <p>Once you’ve done this, you have everything ready to start access TMDB’s API.</p> <p>Let’s test it. Run the program “movies.py” with your API key. If you get an API key error, then it didn’t work. If you get a bunch of information about a movie, then it worked!</p> <p>Congrats! You now can access TMDB with a program!</p> <h3 id="exercise-9-pull-out-important-movie-information"> <a href="#exercise-9-pull-out-important-movie-information" class="anchor-heading" aria-labelledby="exercise-9-pull-out-important-movie-information"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 9: Pull out important movie information </h3> <p>When you run “movies.py”, the TMDB API returns a data structure – a complicated dictionary that contains lots of information about the movie. Right now, all the program does is print out the whole dictionary. While this has some useful information, it also prints out a ton of information that isn’t needed.</p> <p>Let’s improve our movie information program by only having it print out the important information. Modify “movies.py” to only print out the title, tagline, and overview (in that order):</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Black Panther: Wakanda Forever
Forever.
--------------
Queen Ramonda, Shuri, M’Baku, Okoye and the Dora Milaje fight to protect their
nation from intervening world powers in the wake of King T’Challa’s death. As
the Wakandans strive to embrace their next chapter, the heroes must band
together with the help of War Dog Nakia and Everett Ross and forge a new path
for the kingdom of Wakanda.
</code></pre></div></div> <h3 id="exercise-10-print-out-the-genres-also"> <a href="#exercise-10-print-out-the-genres-also" class="anchor-heading" aria-labelledby="exercise-10-print-out-the-genres-also"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 10: Print out the genres also </h3> <p>Modify your movie program to print out the movie’s genres also. Notice that a movie can be in more than one genre, and that TMDB gives you the genre in a list. You’ll have to use a for loop to loop through that list and print out the name of each genre:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Black Panther: Wakanda Forever
Forever.
--------------
Queen Ramonda, Shuri, M’Baku, Okoye and the Dora Milaje fight to protect their
nation from intervening world powers in the wake of King T’Challa’s death. As
the Wakandans strive to embrace their next chapter, the heroes must band
together with the help of War Dog Nakia and Everett Ross and forge a new path
for the kingdom of Wakanda.
- Action
- Adventure
- Science Fiction
</code></pre></div></div> <h3 id="exercise-11-print-out-the-stars-also"> <a href="#exercise-11-print-out-the-stars-also" class="anchor-heading" aria-labelledby="exercise-11-print-out-the-stars-also"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 11: Print out the stars also </h3> <p>Next, we are going to modify out movie program to get the list of people who starred in the movie, and print out their names.</p> <p>Notice that the data we get back from TMDB doesn’t actually include the names of any of the actors (the ‘cast’) in the movie. Instead, we are going to need to make a <em>second</em> request of the API. Copy and paste the code that makes the API request, and change the URL to instead use the <code class="language-plaintext highlighter-rouge">movie_credits</code> URL. Look closely at that URL; it is the word <code class="language-plaintext highlighter-rouge">movie</code> followed by the ID number of the movie (24426) we want, followed by the word <code class="language-plaintext highlighter-rouge">credits</code>.</p> <p>This should give you a second set of results. It has two entries: <code class="language-plaintext highlighter-rouge">cast</code> is a list of actors in the movie, and <code class="language-plaintext highlighter-rouge">crew</code> is a list of the production crew of the movie. We only want to print out the cast for this exercise.</p> <p>Once done, you should print the names of the cast members (at least the top 5 or 10):</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Black Panther: Wakanda Forever
Forever.
--------------
Queen Ramonda, Shuri, M’Baku, Okoye and the Dora Milaje fight to protect their
nation from intervening world powers in the wake of King T’Challa’s death. As
the Wakandans strive to embrace their next chapter, the heroes must band
together with the help of War Dog Nakia and Everett Ross and forge a new path
for the kingdom of Wakanda.
- Action
- Adventure
- Science Fiction
Starring:
* Letitia Wright
* Lupita Nyong'o
* Danai Gurira
* Winston Duke
* Dominique Thorne
* Tenoch Huerta
* Angela Bassett
* Florence Kasumba
* Michaela Coel
* Mabel Cadena
</code></pre></div></div> <p><em>Hint</em>: You will probably need to change the printing code back to just pretty print the dictionary returned by the credits API so you can see what it looks like.</p> <p><em>Hint 2</em>: The credits request returns a LOT of information. So much that powershell or terminal might not be able to display it all; when you scroll back you might not get all the way back to the beginning. To deal with this, you can limit how <em>deep</em> into the data structure you pretty print. <code class="language-plaintext highlighter-rouge">pprint(info, depth=1)</code> only prints the top level dictionary. <code class="language-plaintext highlighter-rouge">pprint(info, depth=2)</code> prints the top level and one level underneath it. That can help you see parts of the dictionary when the data structure is REALLY big.</p> <h3 id="exercise-12-change-to-a-different-movie"> <a href="#exercise-12-change-to-a-different-movie" class="anchor-heading" aria-labelledby="exercise-12-change-to-a-different-movie"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 12: Change to a Different Movie </h3> <p>Let’s change our program to request information about a different movie. Hopefully this should be pretty easy. Let’s get information about the movie with TMDB ID number 600583.</p> <p>What movie is that?</p> <h3 id="exercise-13-searching-the-database"> <a href="#exercise-13-searching-the-database" class="anchor-heading" aria-labelledby="exercise-13-searching-the-database"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 13: Searching the Database </h3> <p>For all of the previous exercises, you need to know the exact movie ID number in order to get information about a movie. That isn’t all that helpful if you don’t already know the ID numbers. So instead, we can search the database by name.</p> <p>To do that, we need to use the API slightly different. We need to specify a <em>search query</em>. We do that as a parameter to the API call. We are already passing one parameter – our <code class="language-plaintext highlighter-rouge">api_key</code>. We need to add a second parameter called <code class="language-plaintext highlighter-rouge">query</code> by adding it as an additional item in the parameter dictionary. We can then use it to search for a movie by name.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>parameter = {"api_key": api_key, "query": "Avengers"}
result_json = requests.get(movie_search, parameter)
</code></pre></div></div> <p>For this exercise, create a new program – call it <code class="language-plaintext highlighter-rouge">search.py</code>. Make your program to search TMDB for movies with the word “Avengers” in the title. You can and should copy code from your <code class="language-plaintext highlighter-rouge">movies.py</code> program as needed.</p> <p><em>Hint</em>: You will probably need to change the printing code back to just pretty print the resulting dictionary so you can see what it looks like, since the search results dictionary looks different than the movie dictionary or the credits dictionary.</p> <h2 id="challenges"> <a href="#challenges" class="anchor-heading" aria-labelledby="challenges"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Challenges </h2> <h3 id="challenge-1-print-information-about-the-top-search-result"> <a href="#challenge-1-print-information-about-the-top-search-result" class="anchor-heading" aria-labelledby="challenge-1-print-information-about-the-top-search-result"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Challenge 1: Print Information About the Top Search Result </h3> <p>When you search for a movie by name using the search API, most likely the first result is the movie you were looking for. Let’s assume that it is.</p> <p>Combine the results of your last two programs / exercises. Search for the movie “Harry Potter”. The first movie in the list of results is probably the first Harry Potter movie. In the dictionary that you get back from the API, you should be able to find the ID number of that movie. Then fill that ID number in to the URLs to get the movie name, tagline, and overview, and also into the URL to get the cast. Print out all of that information in a human-readable form like you did in exercise 11.</p> <p>This program in total should make 3 API queries in total: search, movie, and credits.</p> <h3 id="challenge-2-movie-search-progarm-aka-user-input"> <a href="#challenge-2-movie-search-progarm-aka-user-input" class="anchor-heading" aria-labelledby="challenge-2-movie-search-progarm-aka-user-input"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Challenge 2: Movie Search Progarm (aka user input) </h3> <p>Take the program you wrote for challenge 1, and modify it to accept the search query as an input. That is, your program should ask the user what movie they want to know about. It will then search TMDB for that movie. It will assume that the first result is the movie the user is looking for, and remember the ID number for that movie. Then it will use the API to get inforamtion about the movie such as its full name, tagline, overview, and list of stars, and print out all of that information.</p> <p>This is creating a movie search tool. You type in the name of a movie, and is prints out a bunch of information about that movie.</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
